<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="width=device-width, initial-scale=1" name="viewport">
		<meta http-equiv="content-security-policy" content=""><meta content="A modern, cross platform Python toolkit for creating desktop GUI applications" name="description" data-svelte="svelte-ddy29s"><meta content="A modern, cross platform Python toolkit for creating desktop GUI applications" name="og:description" data-svelte="svelte-ddy29s"><title>Tukaan • Docs - Blocking the event loop</title>
<meta content="Tukaan • Docs - Blocking the event loop" name="og:title">
<meta content="Tukaan" name="og:site_name">
<meta content="The Tukaan team" name="author">
<link href="/branding/logo.png" rel="icon" type="image/png">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/__layout.svelte-7225bc50.css">
	<link rel="stylesheet" href="/_app/immutable/assets/TreeView.svelte_svelte_type_style_lang-e18b664c.css">
	<link rel="stylesheet" href="/_app/immutable/assets/Footer.svelte_svelte_type_style_lang-fd7b22b2.css">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/docs/__layout.svelte-00089720.css">
	<link rel="modulepreload" href="/_app/immutable/start-2d1c24e3.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/index-a8447449.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/singletons-cdeec3fd.js">
	<link rel="modulepreload" href="/_app/immutable/pages/__layout.svelte-7d91a7ff.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/Footer.svelte_svelte_type_style_lang-c35c75ae.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/docs-f542d925.js">
	<link rel="modulepreload" href="/_app/immutable/pages/docs/__layout.svelte-61203565.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/Metadata-369f14a5.js">
	<link rel="modulepreload" href="/_app/immutable/pages/docs/advanced/blocking.md-e228b520.js">
	</head>

	<body>
		






<header class="navbar svelte-vayzh0"><a class="logo svelte-vayzh0" href="/" sveltekit:prefetch><img alt="Tukaan logo" class="logo-image svelte-vayzh0" src="/branding/logo.png">
		Tukaan
	</a>
	<div class="pages svelte-vayzh0"><a class="item svelte-vayzh0" sveltekit:prefetch href="/">Home
				</a><a class="item svelte-vayzh0 selected" sveltekit:prefetch href="/docs">Docs
				</a></div>
	<div class="buttons svelte-vayzh0"><a class="button svelte-vayzh0" href="https://pypi.org/project/tukaan" aria-label="Pypi" title="Pypi" target="_blank" rel="noreferrer noopener"><!-- HTML_TAG_START --><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.07 18.94l6.5-14.5a.75.75 0 011.4.52l-.04.1-6.5 14.5a.75.75 0 01-1.4-.52l.04-.1 6.5-14.5-6.5 14.5zm-5.85-7.47l4.25-4.25a.75.75 0 011.13.98l-.07.08L3.81 12l3.72 3.72a.75.75 0 01-.98 1.13l-.08-.07-4.25-4.25a.75.75 0 01-.07-.98l.07-.08 4.25-4.25-4.25 4.25zm14.25-4.25a.75.75 0 01.98-.07l.08.07 4.25 4.25c.27.27.3.68.07.98l-.07.08-4.25 4.25a.75.75 0 01-1.13-.98l.07-.08L20.19 12l-3.72-3.72a.75.75 0 010-1.06z"/></svg><!-- HTML_TAG_END --></a><a class="button svelte-vayzh0" href="https://github.com/tukaan/tukaan" aria-label="GitHub" title="GitHub" target="_blank" rel="noreferrer noopener"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg><!-- HTML_TAG_END --></a></div>
	<aside class="sidebar scroller svelte-vayzh0">
<a tabindex="0" aria-selected="false" class="list-item    svelte-1s830ni" href="/" role="listitem" type="navigation" sveltekit:prefetch>
					
		<span class="text-block type-body  svelte-zxj483"><span>Home</span>
				
</span></a><div class="tree-view scroller svelte-2n76fs initial"><div class="subtree svelte-2n76fs">
<li tabindex="0" aria-selected="false" class="list-item    svelte-1s830ni" href="" role="listitem"><!-- HTML_TAG_START --><!-- HTML_TAG_END -->
					
		<span class="text-block type-body  svelte-zxj483"><span class="tree-view-item">Docs</span>
					<div class="expander-icon"><!-- HTML_TAG_START --><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.15 5.65c.2-.2.5-.2.7 0L8 9.79l4.15-4.14a.5.5 0 01.7.7l-4.5 4.5a.5.5 0 01-.7 0l-4.5-4.5a.5.5 0 010-.7z"/></svg><!-- HTML_TAG_END --></div>
				
</span></li>
				
			</div>
</div>
		<hr class="svelte-vayzh0">
		
<a tabindex="0" aria-selected="false" class="list-item    svelte-1s830ni" href="https://pypi.org/project/tukaan" role="listitem" sveltekit:prefetch type="navigation" target="_blank" rel="noreferrer noopener"><!-- HTML_TAG_START --><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.07 18.94l6.5-14.5a.75.75 0 011.4.52l-.04.1-6.5 14.5a.75.75 0 01-1.4-.52l.04-.1 6.5-14.5-6.5 14.5zm-5.85-7.47l4.25-4.25a.75.75 0 011.13.98l-.07.08L3.81 12l3.72 3.72a.75.75 0 01-.98 1.13l-.08-.07-4.25-4.25a.75.75 0 01-.07-.98l.07-.08 4.25-4.25-4.25 4.25zm14.25-4.25a.75.75 0 01.98-.07l.08.07 4.25 4.25c.27.27.3.68.07.98l-.07.08-4.25 4.25a.75.75 0 01-1.13-.98l.07-.08L20.19 12l-3.72-3.72a.75.75 0 010-1.06z"/></svg><!-- HTML_TAG_END -->
				
		<span class="text-block type-body  svelte-zxj483"><span>Pypi</span>
			
</span></a>
<a tabindex="0" aria-selected="false" class="list-item    svelte-1s830ni" href="https://github.com/tukaan/tukaan" role="listitem" sveltekit:prefetch type="navigation" target="_blank" rel="noreferrer noopener"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg><!-- HTML_TAG_END -->
				
		<span class="text-block type-body  svelte-zxj483"><span>GitHub</span>
			
</span></a></aside>
</header>


<section class="docs svelte-pu1q7x"><aside class="sidebar svelte-pu1q7x"><div class="search svelte-pu1q7x"><div class="autosuggest-wrapper svelte-pu1q7x">
<div class="text-box-container  svelte-1uuw24v">
	
	<input type="search" class="text-box svelte-1uuw24v" placeholder="Search the docs" flyoutVisible="false" value="">
	<div class="text-box-underline svelte-1uuw24v"></div>
	<div class="text-box-buttons svelte-1uuw24v">
			<button class="text-box-button  svelte-159a5xt" type="button" aria-label="Search"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path d="M5.00038 1C2.79103 1 1 2.7909 1 5.00008C1 7.20927 2.79103 9.00017 5.00038 9.00017C5.92463 9.00017 6.77568 8.68675 7.45302 8.1604L10.1464 10.8536C10.3416 11.0488 10.6583 11.0488 10.8535 10.8536C11.0488 10.6583 11.0488 10.3417 10.8535 10.1464L8.16028 7.45337C8.68705 6.77595 9.00075 5.92465 9.00075 5.00008C9.00075 2.7909 7.20972 1 5.00038 1ZM2.00009 5.00008C2.00009 3.34319 3.34337 2.00002 5.00038 2.00002C6.65739 2.00002 8.00066 3.34319 8.00066 5.00008C8.00066 6.65697 6.65739 8.00015 5.00038 8.00015C3.34337 8.00015 2.00009 6.65697 2.00009 5.00008Z" fill="currentColor"></path></svg>
</button>
			
		</div>
	
</div>
				</div>
			<hr role="separator" class="svelte-pu1q7x"></div>
		<div class="tree-view scroller svelte-2n76fs initial">
<a tabindex="0" aria-selected="false" class="list-item    svelte-1s830ni" href="/docs" role="listitem"><!-- HTML_TAG_START --><!-- HTML_TAG_END -->
				
		<span class="text-block type-body  svelte-zxj483">Overview
			
</span></a><div class="subtree svelte-2n76fs">
<li tabindex="0" aria-selected="false" class="list-item    svelte-1s830ni" href="" role="listitem"><!-- HTML_TAG_START --><!-- HTML_TAG_END -->
					
		<span class="text-block type-body  svelte-zxj483"><span class="tree-view-item">The basics</span>
					<div class="expander-icon"><!-- HTML_TAG_START --><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.15 5.65c.2-.2.5-.2.7 0L8 9.79l4.15-4.14a.5.5 0 01.7.7l-4.5 4.5a.5.5 0 01-.7 0l-4.5-4.5a.5.5 0 010-.7z"/></svg><!-- HTML_TAG_END --></div>
				
</span></li>
				
			</div><div class="subtree svelte-2n76fs">
<li tabindex="0" aria-selected="false" class="list-item    svelte-1s830ni" href="" role="listitem"><!-- HTML_TAG_START --><!-- HTML_TAG_END -->
					
		<span class="text-block type-body  svelte-zxj483"><span class="tree-view-item">Miscellaneous</span>
					<div class="expander-icon"><!-- HTML_TAG_START --><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.15 5.65c.2-.2.5-.2.7 0L8 9.79l4.15-4.14a.5.5 0 01.7.7l-4.5 4.5a.5.5 0 01-.7 0l-4.5-4.5a.5.5 0 010-.7z"/></svg><!-- HTML_TAG_END --></div>
				
</span></li>
				
			</div><div class="subtree svelte-2n76fs">
<li tabindex="0" aria-selected="false" class="list-item    svelte-1s830ni" href="" role="listitem"><!-- HTML_TAG_START --><!-- HTML_TAG_END -->
					
		<span class="text-block type-body  svelte-zxj483"><span class="tree-view-item">Advanced</span>
					<div class="expander-icon"><!-- HTML_TAG_START --><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.15 5.65c.2-.2.5-.2.7 0L8 9.79l4.15-4.14a.5.5 0 01.7.7l-4.5 4.5a.5.5 0 01-.7 0l-4.5-4.5a.5.5 0 010-.7z"/></svg><!-- HTML_TAG_END --></div>
				
</span></li>
				
			</div>
</div></aside>
	<article class="page svelte-pu1q7x"><div class="search-mobile svelte-pu1q7x"><div class="autosuggest-wrapper svelte-pu1q7x">
<div class="text-box-container  svelte-1uuw24v">
	
	<input type="search" class="text-box svelte-1uuw24v" placeholder="Search the docs" flyoutVisible="false" value="">
	<div class="text-box-underline svelte-1uuw24v"></div>
	<div class="text-box-buttons svelte-1uuw24v">
			<button class="text-box-button  svelte-159a5xt" type="button" aria-label="Search"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path d="M5.00038 1C2.79103 1 1 2.7909 1 5.00008C1 7.20927 2.79103 9.00017 5.00038 9.00017C5.92463 9.00017 6.77568 8.68675 7.45302 8.1604L10.1464 10.8536C10.3416 11.0488 10.6583 11.0488 10.8535 10.8536C11.0488 10.6583 11.0488 10.3417 10.8535 10.1464L8.16028 7.45337C8.68705 6.77595 9.00075 5.92465 9.00075 5.00008C9.00075 2.7909 7.20972 1 5.00038 1ZM2.00009 5.00008C2.00009 3.34319 3.34337 2.00002 5.00038 2.00002C6.65739 2.00002 8.00066 3.34319 8.00066 5.00008C8.00066 6.65697 6.65739 8.00015 5.00038 8.00015C3.34337 8.00015 2.00009 6.65697 2.00009 5.00008Z" fill="currentColor"></path></svg>
</button>
			
		</div>
	
</div>
				</div></div>
		<div class="page-inner markdown-body svelte-pu1q7x"><header class="svelte-pu1q7x">
<a role="button" href="https://github.com/tukaan/tukaan.github.io/edit/main/src/routes/docs/advanced/blocking.md" class="icon-button   svelte-1iys5lx" target="_blank" rel="noreferrer noopener"><!-- HTML_TAG_START --><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.95 3.05a3.58 3.58 0 00-5.06 0L3.94 15c-.4.4-.7.92-.82 1.48l-1.1 4.6a.75.75 0 00.9.9l4.6-1.1A3.1 3.1 0 009 20.07L20.95 8.11a3.58 3.58 0 000-5.06zm-4 1.06a2.08 2.08 0 112.94 2.94l-.89.89L16.06 5l.9-.9zM15 6.06L17.94 9l-10 10a1.6 1.6 0 01-.76.43l-3.42.8.82-3.4c.06-.3.21-.56.42-.77l10-10z"/></svg><!-- HTML_TAG_END -->
</a></header>
				<h1 id="blocking-the-event-loop">Blocking the event loop</h1>
<p>If you do long-running operations in your GUI program, like <code>time.sleep(10)</code>, it will block the event loop from running, thus prevent it from processing events and redrawing the GUI, so neither the user nor the operating system (windowmanager) can interact/communicate with the window. For example Windows marks the window as “Not responding” after 5 seconds.</p>
<blockquote><p>In a GUI application you shouldn’t do things that take longer than 0.1 seconds.\
But in case you need to do it, let’s look at what options we have.</p></blockquote>
<h2 id="threading">Threading</h2>
<p>Unfortunately, Tukaan isn’t thread-safe because it would make it significantly slower. This means that you can’t call most of Tukaan’s functions outside the main thread (e.g. you can generate a event in another thread, but you can’t create an image). However there are some ways to communicate between the threads, let’s look at them!</p>
<h3 id="using-virtual-events">Using virtual events</h3>
<p>A really nice way to communicate between threads in Tukaan is to use custom <a href="/docs/misc/events#virtual-events">virtual events</a>).
With the <code>event_generate</code> method you can post a virtual event to the event loop, which will handle it, and you can even send arbitary Python objects as data with it.</p>
<p>Here you can see that that the program starts a second thread, and the <code>time.sleep(4)</code> will block it for 4 seconds. Then it sends a virtual event to the event loop. This event has a function bound to it that will run in the main thread.</p>
<pre class="language-python"><!-- HTML_TAG_START --><code class="language-python"><span class="token keyword">import</span> threading
<span class="token keyword">import</span> time
<span class="token keyword">import</span> tukaan

app <span class="token operator">=</span> tukaan<span class="token punctuation">.</span>App<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">this_is_a_blocking_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment"># Block the thread</span>
    this_is_a_data <span class="token operator">=</span> <span class="token string">"Hi! I'm from another thread!"</span>
    app<span class="token punctuation">.</span>generate_event<span class="token punctuation">(</span><span class="token string">"&lt;&lt;VirtualEventFromAnotherThread>>"</span><span class="token punctuation">,</span> data<span class="token operator">=</span>this_is_a_data<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">event_receiver</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Event received with data: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>event<span class="token punctuation">.</span>data<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token string">"&lt;&lt;VirtualEventFromAnotherThread>>"</span><span class="token punctuation">,</span> event_receiver<span class="token punctuation">,</span> send_event<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>this_is_a_blocking_func<span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span></code><!-- HTML_TAG_END --></pre></div></article>
</section>

<footer id="page-footer" class="page-section  svelte-1090x36">
		<div class="page-section-inner svelte-1090x36"><div class="column svelte-tq7whh"><a class="logo svelte-tq7whh" href="/" sveltekit:prefetch><img alt="Tukaan logo" height="32" src="/branding/tukaan.png" width="32" class="svelte-tq7whh">
			Tukaan
		</a>
		<p>Copyright © 2021 - 2022 The Tukaan team</p></div>
	<div class="column svelte-tq7whh"><p>Pages</p>
		
<a role="button" href="/" class="button style-hyperlink   svelte-nqc07q" sveltekit:prefetch>Home
		
</a>
		
<a role="button" href="/docs" class="button style-hyperlink   svelte-nqc07q" sveltekit:prefetch>Documentation
		
</a></div>
	<div class="column svelte-tq7whh"><p>Contribute to Tukaan</p>

		
<a role="button" href="https://github.com/tukaan/tukaan/" class="button style-hyperlink   svelte-nqc07q" target="_blank" rel="noreferrer noopener">GitHub repo
		
</a>

		
<a role="button" href="https://github.com/tukaan/tukaan/discussions/new?category=feedback" class="button style-hyperlink   svelte-nqc07q" target="_blank" rel="noreferrer noopener">Give feedback
		
</a></div>
	<div class="column svelte-tq7whh"><p>Contribute to this site</p>
		
<a role="button" href="https://github.com/tukaan/tukaan.github.io/" class="button style-hyperlink   svelte-nqc07q" target="_blank" rel="noreferrer noopener">GitHub repo
		
</a>

		
<a role="button" href="https://github.com/tukaan/tukaan.github.io/issues/new" class="button style-hyperlink   svelte-nqc07q" target="_blank" rel="noreferrer noopener">Found a bug?
		
</a></div></div></footer>


		<script type="module" data-sveltekit-hydrate="y3tkuw">
		import { start } from "/_app/immutable/start-2d1c24e3.js";
		start({
			target: document.querySelector('[data-sveltekit-hydrate="y3tkuw"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [0, 2, 3],
				params: {},
				routeId: "docs/advanced/blocking"
			}
		});
	</script>
	</body>
</html>
