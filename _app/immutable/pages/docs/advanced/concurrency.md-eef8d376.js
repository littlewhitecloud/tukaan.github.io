import{S as dt,i as kt,s as mt,e as i,t as o,k,c as l,a as c,h as p,d as n,m,b as H,g as s,R as a,n as tt}from"../../../chunks/index-cd4ba230.js";function vt(rt){let u,D,P,h,j,E,L,M,x,y,T,N,A,v,R,B,_,S,C,f,V,G,r,K,g,Q,z,I,J,X,O,d,Y,U,Z,$,W,w,ut=`<code class="language-python"><span class="token keyword">import</span> threading
<span class="token keyword">import</span> time
<span class="token keyword">import</span> tukaan

app <span class="token operator">=</span> tukaan<span class="token punctuation">.</span>App<span class="token punctuation">(</span><span class="token punctuation">)</span>
window <span class="token operator">=</span> tukaan<span class="token punctuation">.</span>MainWindow<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">this_is_a_blocking_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment"># Block the thread</span>
    this_is_a_data <span class="token operator">=</span> <span class="token string">"Hi! I'm from another thread!"</span>
    window<span class="token punctuation">.</span>generate_event<span class="token punctuation">(</span><span class="token string">"&lt;&lt;VirtualEventFromAnotherThread>>"</span><span class="token punctuation">,</span> data<span class="token operator">=</span>this_is_a_data<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">event_receiver</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Event received with data: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>event<span class="token punctuation">.</span>data<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

window<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token string">"&lt;&lt;VirtualEventFromAnotherThread>>"</span><span class="token punctuation">,</span> event_receiver<span class="token punctuation">,</span> send_event<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>this_is_a_blocking_func<span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span></code>`;return{c(){u=i("h1"),D=o("Blocking the event loop"),P=k(),h=i("p"),j=o("If you do long-running operations in your GUI program, like "),E=i("code"),L=o("time.sleep(10)"),M=o(", it will block the event loop from running, thus prevent it from processing events and redrawing the GUI, so neither the user nor the operating system (windowmanager) can interact/communicate with the window. For example Windows marks the window as \u201CNot responding\u201D after 5 seconds."),x=k(),y=i("blockquote"),T=i("p"),N=o(`In a GUI application you shouldn\u2019t do things that take longer than 0.1 seconds.
But in case you need to do it, let\u2019s look at what options we have.`),A=k(),v=i("h2"),R=o("Threading"),B=k(),_=i("p"),S=o("Unfortunately, Tukaan isn\u2019t thread-safe because it would make it significantly slower. This means that you can\u2019t call most of Tukaan\u2019s functions outside the main thread (e.g. you can generate a event in another thread, but you can\u2019t create an image). However there are some ways to communicate between the threads, let\u2019s look at them!"),C=k(),f=i("h3"),V=o("Using virtual events"),G=k(),r=i("p"),K=o("A really nice way to communicate between threads in Tukaan is to use custom "),g=i("a"),Q=o("virtual events"),z=o(`).
With the `),I=i("code"),J=o("event_generate"),X=o(" method you can post a virtual event to the event loop, which will handle it, and you can even send arbitary Python objects as data with it."),O=k(),d=i("p"),Y=o("Here you can see that that the program starts a second thread, and the "),U=i("code"),Z=o("time.sleep(4)"),$=o(" will block it for 4 seconds. Then it sends a virtual event to the event loop. This event has a function bound to it that will run in the main thread."),W=k(),w=i("pre"),this.h()},l(t){u=l(t,"H1",{id:!0});var e=c(u);D=p(e,"Blocking the event loop"),e.forEach(n),P=m(t),h=l(t,"P",{});var q=c(h);j=p(q,"If you do long-running operations in your GUI program, like "),E=l(q,"CODE",{});var nt=c(E);L=p(nt,"time.sleep(10)"),nt.forEach(n),M=p(q,", it will block the event loop from running, thus prevent it from processing events and redrawing the GUI, so neither the user nor the operating system (windowmanager) can interact/communicate with the window. For example Windows marks the window as \u201CNot responding\u201D after 5 seconds."),q.forEach(n),x=m(t),y=l(t,"BLOCKQUOTE",{});var at=c(y);T=l(at,"P",{});var et=c(T);N=p(et,`In a GUI application you shouldn\u2019t do things that take longer than 0.1 seconds.
But in case you need to do it, let\u2019s look at what options we have.`),et.forEach(n),at.forEach(n),A=m(t),v=l(t,"H2",{id:!0});var st=c(v);R=p(st,"Threading"),st.forEach(n),B=m(t),_=l(t,"P",{});var ot=c(_);S=p(ot,"Unfortunately, Tukaan isn\u2019t thread-safe because it would make it significantly slower. This means that you can\u2019t call most of Tukaan\u2019s functions outside the main thread (e.g. you can generate a event in another thread, but you can\u2019t create an image). However there are some ways to communicate between the threads, let\u2019s look at them!"),ot.forEach(n),C=m(t),f=l(t,"H3",{id:!0});var pt=c(f);V=p(pt,"Using virtual events"),pt.forEach(n),G=m(t),r=l(t,"P",{});var b=c(r);K=p(b,"A really nice way to communicate between threads in Tukaan is to use custom "),g=l(b,"A",{href:!0});var it=c(g);Q=p(it,"virtual events"),it.forEach(n),z=p(b,`).
With the `),I=l(b,"CODE",{});var lt=c(I);J=p(lt,"event_generate"),lt.forEach(n),X=p(b," method you can post a virtual event to the event loop, which will handle it, and you can even send arbitary Python objects as data with it."),b.forEach(n),O=m(t),d=l(t,"P",{});var F=c(d);Y=p(F,"Here you can see that that the program starts a second thread, and the "),U=l(F,"CODE",{});var ct=c(U);Z=p(ct,"time.sleep(4)"),ct.forEach(n),$=p(F," will block it for 4 seconds. Then it sends a virtual event to the event loop. This event has a function bound to it that will run in the main thread."),F.forEach(n),W=m(t),w=l(t,"PRE",{class:!0});var ht=c(w);ht.forEach(n),this.h()},h(){H(u,"id","blocking-the-event-loop"),H(v,"id","threading"),H(f,"id","using-virtual-events"),H(g,"href","/docs/misc/events"),H(w,"class","language-python")},m(t,e){s(t,u,e),a(u,D),s(t,P,e),s(t,h,e),a(h,j),a(h,E),a(E,L),a(h,M),s(t,x,e),s(t,y,e),a(y,T),a(T,N),s(t,A,e),s(t,v,e),a(v,R),s(t,B,e),s(t,_,e),a(_,S),s(t,C,e),s(t,f,e),a(f,V),s(t,G,e),s(t,r,e),a(r,K),a(r,g),a(g,Q),a(r,z),a(r,I),a(I,J),a(r,X),s(t,O,e),s(t,d,e),a(d,Y),a(d,U),a(U,Z),a(d,$),s(t,W,e),s(t,w,e),w.innerHTML=ut},p:tt,i:tt,o:tt,d(t){t&&n(u),t&&n(P),t&&n(h),t&&n(x),t&&n(y),t&&n(A),t&&n(v),t&&n(B),t&&n(_),t&&n(C),t&&n(f),t&&n(G),t&&n(r),t&&n(O),t&&n(d),t&&n(W),t&&n(w)}}}class wt extends dt{constructor(u){super(),kt(this,u,null,vt,mt,{})}}export{wt as default};
